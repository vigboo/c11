table ip nat {
	set fw_addrs {
		type ipv4_addr
		elements = { 172.19.0.2, 192.168.0.254,
			     192.168.1.254, 192.168.2.254,
			     192.168.99.254 }
	}

	set internal_nets {
		type ipv4_addr
		flags interval
		elements = { 192.168.0.0/24, 192.168.1.0/24,
			     192.168.2.0/24 }
	}

	chain PREROUTING {
		type nat hook prerouting priority dstnat; policy accept;
		ip daddr @fw_addrs tcp dport 80 dnat to 192.168.2.20:80
		ip daddr @fw_addrs tcp dport 25 dnat to 192.168.0.20:25
		ip daddr @fw_addrs tcp dport 6666 dnat to 192.168.1.3:3389
	}

	chain POSTROUTING {
		type nat hook postrouting priority srcnat; policy accept;
		ip daddr 192.168.2.20 tcp dport 80 snat to 192.168.2.254
		ip daddr 192.168.0.20 tcp dport 25 snat to 192.168.0.254
		ip daddr 192.168.1.3 tcp dport 3389 snat to 192.168.1.254
		oifname "eth3" masquerade
	}
}

